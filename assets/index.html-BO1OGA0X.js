import{_ as a,c as i,a as n,o as p}from"./app-CrDOs8BQ.js";const l={};function e(h,s){return p(),i("div",null,s[0]||(s[0]=[n(`<h2 id="一、总结" tabindex="-1"><a class="header-anchor" href="#一、总结"><span>一、总结</span></a></h2><div class="hint-container tip"><p class="hint-container-title">总结</p><p>软件设计可以用的一些框架有很多，我们可以根据各种框架的能力来设计部署方案：</p><ol><li><p><strong>原生代码、页面类框架：</strong> 如 <code>Vue</code>、<code>React</code>、Angular 等，这一类框架主要负责页面开发、集成了很多的插件去辅助我们开发页面</p></li><li><p><strong>Node.js：</strong> 既可以作为前端、也可以作为服务端。</p><ul><li>作为客户端：可以托管前端静态页面、配置代理去转发请求</li><li>作为服务端：可以承载后端 API，通过配置 <code>CORS</code> 来解决跨域问题。</li></ul></li><li><p><strong>静态服务器、CDN：</strong> 只提供代码托管服务。</p></li><li><p><strong>Docker、Nginx、Apache 等：</strong> 可以托管前端代码后端代码，并提供负载均衡，代理等服务</p><ul><li>可以配置请求转发，在接口的响应里添加 CORS 配置来解决跨域问题</li></ul></li><li><p><strong>后端：</strong> 后端提供 API 服务、提供CORS报文封装</p><ul><li>Node.js、Java、C++等：作为后端提供 API 服务，可以配置 CORS 服务解决跨域。</li></ul></li></ol><p>需要我们根据实际情况去选择方案：</p><ul><li>相同服务器和端口：前后端代码可以部署在同一服务器和容器，使用相同的端口。</li><li>不同服务器、端口：如果配置在不同的端口，前端需要使用 Node.js 的 proxy 相关插件来实现跨域，后端可以通过配置 CORS 报文，配置转发前端的请求来解决跨域。</li></ul></div><h2 id="二、方案示例" tabindex="-1"><a class="header-anchor" href="#二、方案示例"><span>二、方案示例</span></a></h2><p>在前后端分离的架构下，前端部署方案有多种选择，每种方案都需要考虑跨域问题。以下是常见的部署方案及其跨域处理方式：</p><h3 id="_1-静态资源托管-后端-api-独立部署" tabindex="-1"><a class="header-anchor" href="#_1-静态资源托管-后端-api-独立部署"><span>1. <strong>静态资源托管 + 后端 API 独立部署</strong></span></a></h3><h4 id="方案描述" tabindex="-1"><a class="header-anchor" href="#方案描述"><span>方案描述</span></a></h4><ul><li>前端静态资源（HTML、CSS、JS）托管在静态服务器（如 Nginx、CDN、对象存储等）。</li><li>后端 API 独立部署在另一台服务器或容器中。</li></ul><h4 id="跨域问题" tabindex="-1"><a class="header-anchor" href="#跨域问题"><span>跨域问题</span></a></h4><ul><li><p>前端页面与后端 API 的域名或端口不同，会触发跨域。</p></li><li><p><strong>解决方案</strong>：</p><ol><li><p><strong>CORS（跨域资源共享）</strong>：</p><ul><li>在后端 API 服务中设置响应头，允许前端域名访问。</li></ul><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Node.js示例（Express）</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cors</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cors</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">use</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">origin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://frontend-domain.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">允许的域名</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">methods</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">POST</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PUT</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DELETE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">],</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">允许的HTTP方法</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">credentials</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">允许携带Cookie</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">})</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>反向代理</strong>：</p><ul><li>通过 Nginx 等反向代理将前端和后端 API 统一到同一域名下。</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">server</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">listen</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">80</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">server_name</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">your-domain.com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">托管前端静态资源</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">location</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">root</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/path/to/frontend/dist</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try_files</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">uri</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">uri</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">代理API请求</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">location</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/api</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">proxy_pass</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">http://backend-server:3000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">proxy_set_header</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Host</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ul><h3 id="_2-前端与后端同服务器部署" tabindex="-1"><a class="header-anchor" href="#_2-前端与后端同服务器部署"><span>2. <strong>前端与后端同服务器部署</strong></span></a></h3><h4 id="方案描述-1" tabindex="-1"><a class="header-anchor" href="#方案描述-1"><span>方案描述</span></a></h4><ul><li>前端静态资源和后端 API 部署在同一台服务器上，通过 Node.js 或 Nginx 统一托管。</li><li>前端页面和后端 API 使用同一域名和端口。</li></ul><h4 id="跨域问题-1" tabindex="-1"><a class="header-anchor" href="#跨域问题-1"><span>跨域问题</span></a></h4><ul><li>同源（协议、域名、端口一致），无跨域问题。</li><li><strong>解决方案</strong>： <ul><li>无需额外处理跨域。</li></ul></li></ul><h4 id="示例代码-node-js-托管静态资源-api" tabindex="-1"><a class="header-anchor" href="#示例代码-node-js-托管静态资源-api"><span>示例代码（Node.js 托管静态资源 + API）</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">express</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">express</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">express</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">托管前端静态资源</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">use</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">express</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">static</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">join</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">__dirname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dist</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">定义API路由</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/api/data</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">req</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=&gt;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">message</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Data</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">from</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">backend</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">支持Vue/React的History模式</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">req</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=&gt;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sendFile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">join</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">__dirname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dist</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">index.html</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">listen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=&gt;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Server</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">running</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">on</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://localhost:3000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-前端部署到-cdn-后端-api-独立部署" tabindex="-1"><a class="header-anchor" href="#_3-前端部署到-cdn-后端-api-独立部署"><span>3. <strong>前端部署到 CDN + 后端 API 独立部署</strong></span></a></h3><h4 id="方案描述-2" tabindex="-1"><a class="header-anchor" href="#方案描述-2"><span>方案描述</span></a></h4><ul><li>前端静态资源部署到 CDN（如阿里云 OSS、AWS S3 + CloudFront）。</li><li>后端 API 独立部署。</li></ul><h4 id="跨域问题-2" tabindex="-1"><a class="header-anchor" href="#跨域问题-2"><span>跨域问题</span></a></h4><ul><li>前端页面与后端 API 的域名不同，会触发跨域。</li><li><strong>解决方案</strong>： <ol><li><strong>CORS</strong>： <ul><li>在后端 API 服务中配置 CORS，允许 CDN 域名访问。</li></ul></li><li><strong>自定义域名</strong>： <ul><li>为 CDN 和后端 API 配置同一主域下的子域名（如 <code>frontend.your-domain.com</code> 和 <code>api.your-domain.com</code>），并通过 CORS 允许子域名访问。</li></ul></li></ol></li></ul><h3 id="_4-前端部署到对象存储-后端-api-独立部署" tabindex="-1"><a class="header-anchor" href="#_4-前端部署到对象存储-后端-api-独立部署"><span>4. <strong>前端部署到对象存储 + 后端 API 独立部署</strong></span></a></h3><h4 id="方案描述-3" tabindex="-1"><a class="header-anchor" href="#方案描述-3"><span>方案描述</span></a></h4><ul><li>前端静态资源上传到对象存储（如阿里云 OSS、AWS S3）。</li><li>后端 API 独立部署。</li></ul><h4 id="跨域问题-3" tabindex="-1"><a class="header-anchor" href="#跨域问题-3"><span>跨域问题</span></a></h4><ul><li>前端页面与后端 API 的域名不同，会触发跨域。</li><li><strong>解决方案</strong>： <ol><li><strong>CORS</strong>： <ul><li>在后端 API 服务中配置 CORS，允许对象存储域名访问。</li></ul></li><li><strong>对象存储跨域配置</strong>： <ul><li>在对象存储中配置跨域规则，允许前端域名访问静态资源。</li></ul></li></ol></li></ul><h3 id="_5-前端部署到-github-pages-vercel-netlify-后端-api-独立部署" tabindex="-1"><a class="header-anchor" href="#_5-前端部署到-github-pages-vercel-netlify-后端-api-独立部署"><span>5. <strong>前端部署到 GitHub Pages/Vercel/Netlify + 后端 API 独立部署</strong></span></a></h3><h4 id="方案描述-4" tabindex="-1"><a class="header-anchor" href="#方案描述-4"><span>方案描述</span></a></h4><ul><li>前端静态资源部署到 GitHub Pages、Vercel 或 Netlify 等托管平台。</li><li>后端 API 独立部署。</li></ul><h4 id="跨域问题-4" tabindex="-1"><a class="header-anchor" href="#跨域问题-4"><span>跨域问题</span></a></h4><ul><li>前端页面与后端 API 的域名不同，会触发跨域。</li><li><strong>解决方案</strong>： <ol><li><strong>CORS</strong>： <ul><li>在后端 API 服务中配置 CORS，允许托管平台域名访问。</li></ul></li><li><strong>反向代理</strong>： <ul><li>在托管平台中配置反向代理（如 Vercel 的<code>vercel.json</code>或 Netlify 的<code>_redirects</code>文件），将 API 请求代理到后端服务器。</li></ul><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">vercel.json示例</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">rewrites</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">source</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/api/:path*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">destination</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://backend-server.com/api/:path*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ul><h3 id="_6-前端与后端容器化部署" tabindex="-1"><a class="header-anchor" href="#_6-前端与后端容器化部署"><span>6. <strong>前端与后端容器化部署</strong></span></a></h3><h4 id="方案描述-5" tabindex="-1"><a class="header-anchor" href="#方案描述-5"><span>方案描述</span></a></h4><ul><li>前端和后端分别打包为 Docker 容器，通过 Kubernetes 或 Docker Compose 部署。</li><li>前端容器通过 Nginx 托管静态资源，后端容器提供 API 服务。</li></ul><h4 id="跨域问题-5" tabindex="-1"><a class="header-anchor" href="#跨域问题-5"><span>跨域问题</span></a></h4><ul><li>若前端和后端容器使用不同域名或端口，会触发跨域。</li><li><strong>解决方案</strong>： <ol><li><strong>CORS</strong>： <ul><li>在后端 API 服务中配置 CORS。</li></ul></li><li><strong>反向代理</strong>： <ul><li>在 Nginx 容器中配置反向代理，统一前端和后端的访问入口。</li></ul></li></ol></li></ul><h3 id="_7-前端与后端使用-graphql-或-bff-backend-for-frontend" tabindex="-1"><a class="header-anchor" href="#_7-前端与后端使用-graphql-或-bff-backend-for-frontend"><span>7. <strong>前端与后端使用 GraphQL 或 BFF（Backend for Frontend）</strong></span></a></h3><h4 id="方案描述-6" tabindex="-1"><a class="header-anchor" href="#方案描述-6"><span>方案描述</span></a></h4><ul><li>使用 GraphQL 或 BFF 层聚合后端 API，前端只与 BFF 层通信。</li><li>前端部署到静态服务器或 CDN，BFF 层与后端 API 独立部署。</li></ul><h4 id="跨域问题-6" tabindex="-1"><a class="header-anchor" href="#跨域问题-6"><span>跨域问题</span></a></h4><ul><li>前端与 BFF 层的域名不同，会触发跨域。</li><li><strong>解决方案</strong>： <ol><li><strong>CORS</strong>： <ul><li>在 BFF 层配置 CORS，允许前端域名访问。</li></ul></li><li><strong>反向代理</strong>： <ul><li>通过 Nginx 等反向代理统一前端和 BFF 层的访问入口。</li></ul></li></ol></li></ul><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><table><thead><tr><th>部署方案</th><th>跨域问题</th><th>解决方案</th></tr></thead><tbody><tr><td>静态资源托管 + 后端 API 独立部署</td><td>是</td><td>CORS、反向代理</td></tr><tr><td>前端与后端同服务器部署</td><td>否</td><td>无需处理</td></tr><tr><td>前端部署到 CDN + 后端 API 独立部署</td><td>是</td><td>CORS、自定义域名</td></tr><tr><td>前端部署到对象存储 + 后端 API 独立部署</td><td>是</td><td>CORS、对象存储跨域配置</td></tr><tr><td>前端部署到 GitHub Pages/Vercel/Netlify + 后端 API 独立部署</td><td>是</td><td>CORS、反向代理</td></tr><tr><td>前端与后端容器化部署</td><td>是</td><td>CORS、反向代理</td></tr><tr><td>前端与后端使用 GraphQL 或 BFF</td><td>是</td><td>CORS、反向代理</td></tr></tbody></table><p><strong>推荐方案</strong>：</p><ul><li>小型项目：前端与后端同服务器部署，简单高效。</li><li>中大型项目：静态资源托管 + 后端 API 独立部署，结合 CORS 或反向代理解决跨域问题。</li><li>云原生项目：容器化部署，结合 Nginx 反向代理统一入口。</li></ul>`,45)]))}const k=a(l,[["render",e],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/WebBasic/iygagk3o/","title":"前后端分离的部署方案","lang":"zh-CN","frontmatter":{"title":"前后端分离的部署方案","createTime":"2025/03/15 13:21:27","permalink":"/WebBasic/iygagk3o/"},"headers":[],"readingTime":{"minutes":5.74,"words":1721},"git":{"updatedTime":1742050940000,"contributors":[{"name":"kangkang shang","username":"kangkang shang","email":"535634238@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/kangkang shang?v=4","url":"https://github.com/kangkang shang"}]},"filePathRelative":"前端叨逼叨/前后端分离的部署方案.md"}');export{k as comp,c as data};
