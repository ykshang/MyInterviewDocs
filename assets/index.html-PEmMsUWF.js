import{_ as o,c as r,a as n,o as s}from"./app-CrDOs8BQ.js";const d={};function e(a,t){return s(),r("div",null,t[0]||(t[0]=[n('<h2 id="_1-概念" tabindex="-1"><a class="header-anchor" href="#_1-概念"><span>1. 概念</span></a></h2><p>在 CSS 中，元素的某些属性的变化会触发浏览器的 <code>重绘（Repaint）</code>或 <code>重排（Reflow，也称为重渲染或回流）</code>。了解这些差异可以帮助开发同学优化页面性能，避免不必要的性能开销。</p><p><strong>重绘：</strong> 当一个元素的外观发生改变，但没有改变布局,重新把元素外观绘制出来的过程，叫做重绘。</p><p><strong>重排：</strong> 当 DOM 的变化影响了元素的几何信息(元素的的位置和尺寸大小)，浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排。</p><h2 id="_2-常见的引起重绘的属性" tabindex="-1"><a class="header-anchor" href="#_2-常见的引起重绘的属性"><span>2. 常见的引起重绘的属性</span></a></h2><p><strong>元素尺寸不变</strong> ，主要包含</p><p><strong>元素的颜色、背景、阴影等发生变化</strong></p><table><thead><tr><th><strong>color</strong></th><th><strong>border-style</strong></th><th><strong>visibility</strong></th><th><strong>background</strong></th></tr></thead><tbody><tr><td><strong>outline-width</strong></td><td><strong>background-position</strong></td><td><strong>background-repeat</strong></td><td><strong>outline-color</strong></td></tr><tr><td><strong>background-image</strong></td><td><strong>outline-style</strong></td><td><strong>border-radius</strong></td><td><strong>box-shadow</strong></td></tr><tr><td><strong>background-size</strong></td><td><strong>outline</strong></td><td><strong>text-decoration</strong></td><td></td></tr></tbody></table><h2 id="_3-常见引起重排属性和方法" tabindex="-1"><a class="header-anchor" href="#_3-常见引起重排属性和方法"><span>3.常见引起重排属性和方法</span></a></h2><p>主要是元素的<code>尺寸和位置发生变化</code>，主要包含：</p><ol><li>可以设置元素<code>尺寸、位置</code>的<code>CSS 属性</code></li><li>内容发生变化，如<code>图片或者文本内容</code>，<code>可以引起元素的位置、尺寸变化</code>。</li></ol><table><thead><tr><th><strong>width</strong></th><th><strong>height</strong></th><th><strong>margin</strong></th><th><strong>padding</strong></th></tr></thead><tbody><tr><td><strong>display</strong></td><td><strong>border-width</strong></td><td><strong>border</strong></td><td><strong>position</strong></td></tr><tr><td><strong>overflow</strong></td><td><strong>font-size</strong></td><td><strong>vertical-align</strong></td><td><strong>min-height</strong></td></tr><tr><td><strong>clientWidth</strong></td><td><strong>clientHeight</strong></td><td><strong>clientTop</strong></td><td><strong>clientLeft</strong></td></tr><tr><td><strong>scrollWidth</strong></td><td><strong>scrollHeight</strong></td><td><strong>scrollTop</strong></td><td><strong>scrollLeft</strong></td></tr><tr><td><strong>getComputedStyle()</strong></td><td><strong>getBoundingClientRect()</strong></td><td><strong>scrollIntoViewIfNeeded()</strong></td><td><strong>伪类：如：hover</strong></td></tr></tbody></table><h2 id="_4-什么情况下会触发重绘" tabindex="-1"><a class="header-anchor" href="#_4-什么情况下会触发重绘"><span>4. 什么情况下会触发重绘</span></a></h2><p>触发回流时一定会触发重绘，除此之外，例如颜色修改，设置圆角、文本方向修改，阴影修改等。</p><h2 id="_5-什么情况下会触发回流" tabindex="-1"><a class="header-anchor" href="#_5-什么情况下会触发回流"><span>5. 什么情况下会触发回流</span></a></h2><p>回流这一阶段主要是计算节点的位置和几何信息，那么当页面布局和几何信息发生变化的时候，就需要回流，如下面情况：</p><ol><li>添加或删除可见的 DOM 元素</li><li>元素的位置发生变化</li><li>元素的尺寸发生变化（包括外边距、内边框、边框大小、高度和宽度等）</li><li>内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代</li><li>页面一开始渲染的时候（这避免不了）</li><li>浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）</li></ol><p><strong>提示：重绘不一定导致重排，但重排一定会导致重绘。</strong></p><h2 id="_6-减少重排-回流-的优化方式" tabindex="-1"><a class="header-anchor" href="#_6-减少重排-回流-的优化方式"><span>6. 减少重排（回流）的优化方式</span></a></h2><h4 id="_1-控制范围" tabindex="-1"><a class="header-anchor" href="#_1-控制范围"><span>1. 控制范围</span></a></h4><ol><li>精准修改：操作 DOM 节点的时候，尽量控制范围，精确到某个节点，尽量不要去改动包裹他的父层。</li><li>table、 flex 布局：元素在变化的时候，尽量不要影响整个布局。</li></ol><h4 id="_2-减少次数" tabindex="-1"><a class="header-anchor" href="#_2-减少次数"><span>2. 减少次数</span></a></h4><ol><li>集中操作：不影响逻辑的情况下，尽量把获取和操作 DOM 节点的代码分组，集中操作，典型的就是设置 class 属性。</li><li>读写分离：对 DOM 节点的读写尽量不要混编，即读中夹写， 写中夹读。这样会更容易触发回流</li><li>display：将元素的 display 属性设置为 none，修改完全部的样式修改以后，再重新设置显示。这样对主体页面回流的影响只有两次。</li><li>脱离文档流：absolute 或 fixed 可以将元素脱离文档流，重排开销小，不会对其他部分产生影响</li></ol>',23)]))}const i=o(d,[["render",e],["__file","index.html.vue"]]),l=JSON.parse('{"path":"/WebBasic/qwgxy36w/","title":"重绘和重排（回流）","lang":"zh-CN","frontmatter":{"title":"重绘和重排（回流）","createTime":"2025/03/15 13:21:27","permalink":"/WebBasic/qwgxy36w/"},"headers":[],"readingTime":{"minutes":2.88,"words":864},"git":{"updatedTime":1742050940000,"contributors":[{"name":"kangkang shang","username":"kangkang shang","email":"535634238@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/kangkang shang?v=4","url":"https://github.com/kangkang shang"}]},"filePathRelative":"notes/WebBasic/1.Web 基础/1.重绘和重排（回流）.md"}');export{i as comp,l as data};
